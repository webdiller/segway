- Указать ключ для карт
- Указать ключ для почты
- Указать ключ для ip адреса человека. Спрятать ключ
- Уточнить хост в next.config.js
- Поменял stripeId и priceId для защиты для тестирования. У защиты есть 2 id и 2 priceId. Один для оплаты, другой для подарка
- Цена должа быть 420 а не 4.20
- Уточнить калькуляцию суммы гарантии и цены
- Область нажатия в верхних табах нужно расширить
- Не 420$, а 42$
- Проверить попадания подарка в метаданные
- oldPrice удалить
- У ks-max-white изменил id. Проверить в файле для прода

Оплата за сделанное без интеграции платежки Платежка на 3 этап Остатаки 20к от первого этапа куда переносить? Осталось несколько багов со 2го этапа


- CONVENIENT AND PORTABLE

1. Человек нажимает 'Pay now' (paypay или stripe и т.п.)
2. Формируем контракт на основе планов. Работа с API extended'а Например выбраны модели:

- ks-max 3 year warranty
- ks-es4 1 year warranty
- ks-e-22 Формируем 2 контракта

3. Проводим оплату, при успехе создаем 2 товара-контракта для страйпа

## 1. Человек нажимает 'Pay now' (paypay или stripe и т.п.)

## 2. Формируем объект

### 2.1 Создание продукта(ов) без гарантии

- Забираем id продукта без гарантии
- Ищем продукт по id

- Ищу продукт по stripeId
- Собираю количество
- Вставляю в новый массив
- Необходимые поля:
  - id продукта
  - stripeId
  - priceId

### 2.2 Создание гарантии для продуктов

- Берем id продукта с гарантией и таким же цветом
- Указываем количество
- Вставляем в массив
- Необходимые поля:
  - plan:
    - planId
    - purchasePrice
  - product:
    - referenceId
    - purchasePrice
  - transactionDate
  - transactionId
  - currency

## 3. Проводим оплату

- Проводим стандартную оплату
-

## 4. Создаем контракты

- Создаем контракты для продуктов с гарантией

1. Создание продукта без гарантии

- Ищу продукты по stripeId
- Собираю количество
- Вставляю в новый массив

2. Создание гарантии для продуктов

-

Product Reference ID: kickscooter-zing-e12, Product Name: Segway Ninebot Kickscooter E12, Product Image URL: https://segway.vercel.app/_next/image?url=%2Fks-zing-e12%2Fslider%2F1.jpg&w=1920&q=75,
Product List Price: 25999, Plan Currency Code: USD, Plan Coverage Type: base, Plan Service Type: repair_onsite, Plan Term Length: 12, Plan Deductible: 0, Plan Price: 2299, Plan Title: Extend
Protection Plan - Electric Mobility, Plan ID: B9-SGEBK-1y, Plan Image URL: https://sdk.helloextend.com/extend_icon.png, Plan Details URL: https://customers.extend.com/plan_details/B9-SGEBK-1y

## Формаирование продуктов

1. Делаем итерацию:

- Если попался аксессуар

  - Формируем поля
  - Кидаем в массив
  - Что если попался подарок?

- Если попался продукт, без гарантии

  - Ищем в текущем массиве, есть итерируемый продукт без гарантии?
    - Если нету, то:
      - Формируем поля
      - Кидаем в массив
    - Если есть, то:
      - Если есть, то найденному продукту добавляем количество  
        PS: Здесь будет стандартный продукт stripe

- Если попался продукт с гарантией

  - Ищем в текущем массиве, если ли продукт без гарантии
    - Если есть, то:
      - Найденному продукту добавляем количество
      - Создаем контракт-гарантию
    - Если нету, то:
      - Формируем поля для продукта
      - Кидаем в массив
      - Создаем контракт-гарантию
      - Кидаем в массив

